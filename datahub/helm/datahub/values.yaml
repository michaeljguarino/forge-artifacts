# Default values for datahub.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

postgres:
  team: plural
  user: datahub
  dbName: datahub
  ownerChart: datahub

# Default configuration for pre-requisites to get you started
# Copy this file and update to the configuration of choice
datahub:
  #elasticsearchSetupJob:
  #  enabled: true
  #  extraEnv:
  #    - name: ELASTICSEARCH_VERIFY_CERTS
  #      value: "false"
  mysqlSetupJob:
    enabled: false
  postgresqlSetupJob:
    enabled: true
    image:
      repository: acryldata/datahub-postgres-setup
      tag: "v0.8.41"
    podSecurityContext:
      fsGroup: 1000
    securityContext:
      runAsUser: 1000
    podAnnotations: { }
  global:
    graph_service_impl: "elasticsearch"
    elasticsearch:
      host: "elasticsearch-es-http.elasticsearch.svc"
      port: "9200"
      useSSL: "true"
      auth:
        username: elastic
        password:
          secretRef: elasticsearch-es-elastic-user
          secretKey: elastic
      verify-certs: "false"
      extraEnv:
        - name: ELASTICSEARCH_VERIFY_CERTS
          value: "false"
        - name: ELASTICSEARCH_SSL_KEYSTORE_FILE
          value: "something"
    kafka:
      bootstrap:
        server: "kafka-kafka-bootstrap.kafka.svc:9092"
      zookeeper:
        server: "kafka-zookeeper-client.kafka.svc.local:2181"
    sql:
      datasource:
        hostForpostgresqlClient: "plural-datahub"
        host: "plural-datahub"
        port: "5432"
        #url: "jdbc:mysql://prerequisites-mysql:3306/datahub?verifyServerCertificate=false&useSSL=true&useUnicode=yes&characterEncoding=UTF-8&enabledTLSProtocols=TLSv1.2"
        #driver: "com.mysql.cj.jdbc.Driver"
        username: "datahub"
        password:
          secretRef: datahub.plural-datahub.credentials.postgresql.acid.zalan.do
          secretKey: password
        url: postgresql://$(username):$(password)@plural-datahub:5432/datahub
  prerequisites:
    #elasticsearch:
    #  enabled: true   # set this to false, if you want to provide your own ES instance.
    neo4j:
      enabled: false
    neo4j-community:
      enabled: false   # set this to false, if you have a license for the enterprise edition
    mysql:
      enabled: false
    kafka:
      enabled: false