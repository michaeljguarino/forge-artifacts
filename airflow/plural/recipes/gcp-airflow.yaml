name: gcp-airflow
description: Installs airflow on a GKE cluster
provider: GCP
oidcSettings:
  authMethod: POST
  uriFormat: https://{domain}/oauth-authorized/plural
  domainKey: hostname
dependencies:
  - repo: bootstrap
    name: gcp-kubernetes
  - repo: ingress-nginx
    name: ingress-nginx-gcp
  - repo: postgres
    name: gcp-postgres
sections:
  - name: airflow
    items:
      - type: TERRAFORM
        name: gcp
        configuration:
          - name: airflowBucket
            type: STRING
            documentation: Arbitrary bucket name to store the logs in, eg plural-airflow-logs
      - type: HELM
        name: airflow
        configuration:
          - name: hostname
            documentation: Fully Qualified Domain Name to use for your airflow installation, eg airflow.topleveldomain.com if topleveldomain.com is the domain you inputed for dns_domain above.
            type: STRING
          - name: dagRepo
            type: STRING
            documentation: Arbitrary repo name for the repo your dags will be stored in. eg plural-airflow-dag
          - name: branchName
            type: STRING
            documentation: The branch to sync from
          - name: adminUsername
            type: STRING
            documentation: Airflow username for the admin
          - name: adminFirst
            type: STRING
            documentation: First name for the admin
          - name: adminLast
            type: STRING
            documentation: Last name for the admin
          - name: adminEmail
            type: STRING
            documentation: Email for the admin
