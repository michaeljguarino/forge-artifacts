apiVersion: v1
kind: Secret
metadata:
  name: conversioncacert
  labels:
    {{- include "directpv.labels" . | nindent 4 }}
  annotations:
    rbac.authorization.kubernetes.io/autoupdate: 'true'
data:
  ca.pem: |-
{{ .Files.Get "certs/ca.pem" | b64enc | indent 4 }}
type: Opaque
---
apiVersion: v1
kind: Secret
metadata:
  name: conversionkeypair
  labels:
    {{- include "directpv.labels" . | nindent 4 }}
  annotations:
    rbac.authorization.kubernetes.io/autoupdate: 'true'
data:
  cert.pem: |-
{{ .Files.Get "certs/cert.pem" | b64enc | indent 4 }}
  key.pem: |-
{{ .Files.Get "certs/key.pem" | b64enc | indent 4 }}
type: Opaque
{{- if .Values.controller.validatingWebhook.enabled }}
---
apiVersion: v1
kind: Secret
metadata:
  name: validationwebhookcerts
  labels:
    {{- include "directpv.labels" . | nindent 4 }}
  annotations:
    rbac.authorization.kubernetes.io/autoupdate: 'true'
data:
  cert.pem: |-
{{ .Files.Get "certs/cert.pem" | b64enc | indent 4 }}
  key.pem: |-
{{ .Files.Get "certs/key.pem" | b64enc | indent 4 }}type: Opaque
{{- end }}
