name: oauth2-proxy-aws
description: Installs OAuth2-Proxy on an eks cluster
provider: AWS
dependencies:
- repo: bootstrap
  name: aws-k8s
sections:
- name: oauth2-proxy
  items:
  - type: TERRAFORM
    name: aws
    configuration: []
    # - name: cognito_user_pool_name
    #   documentation: the name for the cognito user pool
    #   type: STRING
    # - name: callback_domain
    #   documentation: the domain for the oidc callback
    #   type: STRING
  - type: HELM
    name: oauth2-proxy
    configuration:
    - name: auth_cookie_domain
      documentation: domain to use for the auth cookie
      type: STRING
    - name: auth_whitelist_domain
      documentation: whitelist domain for auth
      type: STRING
    - name: oidc_issuer_url
      documentation: uri of your oidc issuer
      type: STRING
    - name: oidc_scope
      documentation: oidc scopes to use
      type: STRING
      default: openid profile email
    - name: user_id_claim
      documentation: claim used for the user id
      type: STRING
      default: email
